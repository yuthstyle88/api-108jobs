# app_108jobs_api_common

This crate provides all the data types which are necessary to build a client for [app_108jobs](https://join-app_108jobs.org/). You can use them with the HTTP client of your choice.

Here is an example using [reqwest](https://crates.io/crates/reqwest):

```rust
    let params = GetPosts {
        category_name: Some("askapp_108jobs".to_string()),
        ..Default::default()
    };
    let client = Client::new();
    let response = client
        .get("https://app_108jobs.ml/api/v4/post/list")
        .query(&params)
        .send()
        .await?;
    let json = response.json::<GetPostsResponse>().await.unwrap();
    print!("{:?}", &json);
```

As you can see, each API endpoint needs a parameter type ( GetPosts), path (/post/list) and response type (GetPostsResponse). You can find the paths and handler methods from [this file](https://github.com/app_108jobsNet/app_108jobs/blob/main/src/api_routes_http.rs). The parameter type and response type are defined on each handler method.

For a real example of a app_108jobs API client, look at [app_108jobsBB](https://github.com/app_108jobsNet/app_108jobsBB/tree/main/src/api).

app_108jobs also provides a websocket API. You can find the full websocket code in [this file](https://github.com/app_108jobsNet/app_108jobs/blob/main/src/api_routes_websocket.rs).

## Generate TypeScript bindings

TypeScript bindings (API types) can be generated by running `cargo test --features full`.
The ts files be generated into a `bindings` folder.

This crate uses [`ts_rs`](https://docs.rs/ts-rs/6.2.1/ts_rs/#traits) macros `derive(TS)` and `ts(export)` to attribute types for binding generating.
